{"ast":null,"code":"var _jsxFileName = \"/Users/adercidepaulajunior/Udemy/blog-clone/src/pages/post/page/[...param].tsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useRouter } from 'next/router';\nimport HomePage from '../../../containers/HomePage';\nexport var __N_SSG = true;\nexport default function Page(_ref) {\n  _s();\n\n  var posts = _ref.posts,\n      category = _ref.category,\n      pagination = _ref.pagination;\n  var router = useRouter();\n  if (router.isFallback) return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 33\n    }\n  }, \"Carregando...\");\n  if (!posts.length) return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 29\n    }\n  }, \"P\\xE1gina n\\xE3o encontrada...\");\n  return __jsx(HomePage, {\n    posts: posts,\n    category: category,\n    pagination: pagination,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 10\n    }\n  });\n}\n\n_s(Page, \"fN7XvhJ+p5oE6+Xlo0NJmXpxjC8=\", false, function () {\n  return [useRouter];\n});\n\n_c = Page;\n\nvar _c;\n\n$RefreshReg$(_c, \"Page\");","map":{"version":3,"sources":["/Users/adercidepaulajunior/Udemy/blog-clone/src/pages/post/page/[...param].tsx"],"names":["useRouter","HomePage","Page","posts","category","pagination","router","isFallback","length"],"mappings":";;;;;AACA,SAASA,SAAT,QAA0B,aAA1B;AACA,OAAOC,QAAP,MAAqB,8BAArB;;AAYA,eAAe,SAASC,IAAT,OAA0D;AAAA;;AAAA,MAA1CC,KAA0C,QAA1CA,KAA0C;AAAA,MAAnCC,QAAmC,QAAnCA,QAAmC;AAAA,MAAzBC,UAAyB,QAAzBA,UAAyB;AACvE,MAAMC,MAAM,GAAGN,SAAS,EAAxB;AAEA,MAAIM,MAAM,CAACC,UAAX,EAAuB,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAP;AACvB,MAAI,CAACJ,KAAK,CAACK,MAAX,EAAmB,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCAAP;AAEnB,SAAO,MAAC,QAAD;AAAU,IAAA,KAAK,EAAEL,KAAjB;AAAwB,IAAA,QAAQ,EAAEC,QAAlC;AAA4C,IAAA,UAAU,EAAEC,UAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAP;AACD;;GAPuBH,I;UACPF,S;;;KADOE,I","sourcesContent":["import { GetStaticPaths, GetStaticProps } from 'next';\nimport { useRouter } from 'next/router';\nimport HomePage from '../../../containers/HomePage';\nimport { countAllPosts } from '../../../data/posts/count-all-posts';\nimport { getAllPosts } from '../../../data/posts/get-all-posts';\nimport { PaginationData } from '../../../domain/posts/pagination';\nimport { PostData } from '../../../domain/posts/post';\n\nexport type PageProps = {\n  posts: PostData[];\n  category?: string;\n  pagination: PaginationData;\n};\n\nexport default function Page({ posts, category, pagination }: PageProps) {\n  const router = useRouter();\n\n  if (router.isFallback) return <div>Carregando...</div>;\n  if (!posts.length) return <div>Página não encontrada...</div>;\n\n  return <HomePage posts={posts} category={category} pagination={pagination} />;\n}\n\nexport const getStaticPaths: GetStaticPaths = async () => {\n  return {\n    paths: [],\n    fallback: true,\n  };\n};\n\nexport const getStaticProps: GetStaticProps = async (ctx) => {\n  const page = Number(ctx.params.param[0]);\n  const category = ctx.params.param[1] || '';\n  const postsPerPage = 9;\n  const startFrom = (page - 1) * postsPerPage;\n\n  const nextPage = page + 1;\n  const previousPage = page - 1;\n\n  const categoryQuery = category ? `&category.name_contains=${category}` : '';\n  const urlQuery = `_sort=id:desc&_start=${startFrom}&_limit=${postsPerPage}${categoryQuery}`;\n  const posts = await getAllPosts(urlQuery);\n\n  const numberOfPosts = Number(await countAllPosts(categoryQuery));\n  const pagination: PaginationData = {\n    nextPage,\n    numberOfPosts,\n    postsPerPage,\n    previousPage,\n    category,\n  };\n\n  return {\n    props: { posts, pagination, category },\n    // revalidate: 600,  // Eu não preciso atualizar este blog (por isso comentei)\n  };\n};\n"]},"metadata":{},"sourceType":"module"}